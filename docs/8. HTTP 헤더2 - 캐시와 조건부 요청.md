# HTTP ν—¤λ”2 - μΊμ‹μ™€ μ΅°κ±΄λ¶€ μ”μ²­

## λ©μ°¨
- μΊμ‹ κΈ°λ³Έ λ™μ‘
- κ²€μ¦ ν—¤λ”μ™€ μ΅°κ±΄λ¶€ μ”μ²­
- μΊμ‹μ™€ μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”
- ν”„λ΅μ‹ μΊμ‹
- μΊμ‹ λ¬΄ν¨ν™”

<br/>

# π’΅ μΊμ‹ κΈ°λ³Έ λ™μ‘

**μΊμ‹κ°€ μ‚­μ λλ” μ‹μ μ€ λΈλΌμ°μ €λ§λ‹¤ λ‹¤λ¥΄λ‹¤. ν¬λ΅¬μ κ²½μ°, μΊμ‹ μ‚­μ λ΅ μΊμ‹λ¥Ό μ§μ ‘ μ‚­μ  κ°€λ¥ν•λ‹¤.**

**μ‚­μ  != λ§λ£**

## μΊμ‹κ°€ μ—†μ„ λ•

<details>
<summary>μΊμ‹κ°€ μ—†μ„ λ• μμ‹</summary>

## μΊμ‹κ°€ μ—†μ„ λ•

**μ²« λ²μ§Έ μ”μ²­**

![image](https://user-images.githubusercontent.com/83503188/209657998-ecd631f3-458e-4c4d-a39d-41e6166c5048.png)

![image](https://user-images.githubusercontent.com/83503188/209658027-a0b49a94-1a02-4e08-a0fe-28a7e52d5aa9.png)

![image](https://user-images.githubusercontent.com/83503188/209658066-bfccb27c-f3a0-445f-b1f7-6ece492fb318.png)

<br/>

**λ‘ λ²μ§Έ μ”μ²­**

![image](https://user-images.githubusercontent.com/83503188/209658133-90741101-d164-4db1-b275-d57acfd24c10.png)

![image](https://user-images.githubusercontent.com/83503188/209658156-4f07d1d5-e8a7-4f04-aed0-9d17c0d89713.png)

</details>


- λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•μ•„λ„ κ³„μ† λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄μ„ λ°μ΄ν„°λ¥Ό λ‹¤μ΄λ΅λ“ λ°›μ•„μ•Ό ν•λ‹¤.
- μΈν„°λ„· λ„¤νΈμ›ν¬λ” λ§¤μ° λλ¦¬κ³  λΉ„μ‹Έλ‹¤.
- λΈλΌμ°μ € λ΅λ”© μ†λ„κ°€ λλ¦¬λ‹¤.
- λλ¦° μ‚¬μ©μ κ²½ν—

<br/>

<br/>


## μΊμ‹ μ μ©: cache-control: max-age=60

**`cache-control: max-age=60`**

<details>
<summary>μΊμ‹ μ μ©: cache-control: max-age=60 μμ‹</summary>

## μΊμ‹ μ μ©: cache-control: max-age=60

**μ²« λ²μ§Έ μ”μ²­**

![image](https://user-images.githubusercontent.com/83503188/209658229-c240c990-53d7-4aa3-a6c0-977c4bf70c80.png)

![image](https://user-images.githubusercontent.com/83503188/209658283-1045abe7-aa5e-4a4e-8269-c77e94ff16d1.png)

![image](https://user-images.githubusercontent.com/83503188/209658312-c6b97e3e-bec1-47d4-8c3f-1d19363d66d1.png)

<br/>


**λ‘ λ²μ§Έ μ”μ²­**

![image](https://user-images.githubusercontent.com/83503188/209658369-965f8486-ae7e-4f91-a0e6-eedceb3e11ce.png)

![image](https://user-images.githubusercontent.com/83503188/209658383-3463d1c1-b101-4657-8d1f-9f98eb7e15e2.png)

</details>

- μΊμ‹ λ•λ¶„μ— μΊμ‹ κ°€λ¥ μ‹κ°„λ™μ• λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•μ§€ μ•μ•„λ„ λλ‹¤.
- λΉ„μ‹Ό λ„¤νΈμ›ν¬ μ‚¬μ©λ‰μ„ μ¤„μΌ μ μλ‹¤.
- λΈλΌμ°μ € λ΅λ”© μ†λ„κ°€ λ§¤μ° λΉ λ¥΄λ‹¤.
- λΉ λ¥Έ μ‚¬μ©μ κ²½ν—

<br/>


**μ„Έ λ²μ§Έ μ”μ²­ - μΊμ‹ μ‹κ°„ μ΄κ³Ό**

<details>
<summary>μ„Έ λ²μ§Έ μ”μ²­ - μΊμ‹ μ‹κ°„ μ΄κ³Ό μμ‹</summary>

## μ„Έ λ²μ§Έ μ”μ²­ - μΊμ‹ μ‹κ°„ μ΄κ³Ό

![image](https://user-images.githubusercontent.com/83503188/209658426-a711bf61-a0a7-4566-a3d6-e247e11fdb79.png)

![image](https://user-images.githubusercontent.com/83503188/209658547-8f1f5c8e-c3c8-4078-bdd0-bbbf493241d3.png)

![image](https://user-images.githubusercontent.com/83503188/209658576-a2b78a9d-4d1a-4608-9e12-d2e16d2dc4d6.png)

</details>

- μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•λ©΄, μ„λ²„λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό λ‹¤μ‹ μ΅°νν•κ³ , μΊμ‹λ¥Ό κ°±μ‹ ν•λ‹¤.
- μ΄λ• λ‹¤μ‹ λ„¤νΈμ›ν¬ λ‹¤μ΄λ΅λ“κ°€ λ°μƒν•λ‹¤.

star.jpg λΌλ” μ΄λ―Έμ§€κ°€ μ „ν€ λ°”λ€μ§€ μ•μ•„λ„ μ „μ²΄λ¥Ό λ‹¤μ‹ λ‹¤μ΄λ΅λ“ λ°›λ” μƒν™©μ΄ λ°μƒν•λ‹¤.

<br/>

<br/>

<br/>


# π’΅ κ²€μ¦ ν—¤λ”μ™€ μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

- κ²€μ¦ ν—¤λ”: `Last-Modified`
- μ΅°κ±΄λ¶€ μ”μ²­: `if-modified-since`

## μΊμ‹ μ‹κ°„ μ΄κ³Ό

μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•΄μ„ μ„λ²„μ— λ‹¤μ‹ μ”μ²­ν•λ©΄ λ‹¤μ λ‘ κ°€μ§€ μƒν™©μ΄ λ‚νƒ€λ‚λ‹¤.

![image](https://user-images.githubusercontent.com/83503188/209659239-7abe938d-f932-4af1-a91d-2ab4425f884e.png)

- μΊμ‹ λ§λ£ν›„μ—λ„ μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•μ§€ μ•μ
- μƒκ°ν•΄λ³΄λ©΄ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” λ€μ‹ μ— μ €μ¥ν•΄ λ‘μ—λ μΊμ‹λ¥Ό μ¬μ‚¬μ© ν•  μ μλ‹¤.
- **λ‹¨, ν΄λΌμ΄μ–ΈνΈμ λ°μ΄ν„°μ™€ μ„λ²„μ λ°μ΄ν„°κ°€ κ°™λ‹¤λ” μ‚¬μ‹¤μ„ ν™•μΈν•  μ μλ” λ°©λ²• ν•„μ”**

<br/>

<br/>

## κ²€μ¦ ν—¤λ” μ¶”κ°€: if-modified-since, Last-Modified

<details>
<summary>κ²€μ¦ ν—¤λ” μ¶”κ°€: if-modified-since, Last-Modified μμ‹</summary>

## κ²€μ¦ ν—¤λ” μ¶”κ°€: if-modified-since, Last-Modified

**μ²« λ²μ§Έ μ”μ²­**

![image](https://user-images.githubusercontent.com/83503188/209659378-1b1dc002-7d7b-4a19-b7c6-4ecd431872a1.png)

![image](https://user-images.githubusercontent.com/83503188/209659402-1f06b23c-b013-46a5-ba4e-c36aa06b3ac0.png)
- λΈλΌμ°μ € μΊμ‹μ— λ°μ΄ν„°λ¥Ό μ €μ¥ν•  λ• μ ν¨ μ‹κ°„λΏ μ•„λ‹λΌ ν—¤λ” μ •λ³΄(Last-Modified)λ¥Ό μ΄μ©ν•μ—¬ λ°μ΄ν„° μµμΆ… μμ •μΌλ„ ν¬ν•¨μ‹ν‚¨λ‹¤.

<br/>

**λ‘ λ²μ§Έ μ”μ²­ - μΊμ‹ μ‹κ°„ μ΄κ³Ό**

![image](https://user-images.githubusercontent.com/83503188/209659480-f8439242-54f8-427e-b447-9081b8808371.png)

![image](https://user-images.githubusercontent.com/83503188/209659493-f6b8b30b-8a93-4233-9a66-db232167bcfa.png)
- λΈλΌμ°μ € μΊμ‹μ— μ΅΄μ¬ν•λ” λ°μ΄ν„°μ μ ν¨ μ‹κ°„μ΄ λ§λ£λμ—κΈ° λ•λ¬Έμ— μ„λ²„μ— λ‹¤μ‹ μ΄λ―Έμ§€λ¥Ό μ”μ²­
- μ΄λ• λΈλΌμ°μ € μΊμ‹μ— μµμΆ… μμ •μΌ λ°μ΄ν„°κ°€ μ΅΄μ¬ν•λ―€λ΅ **μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”(`if-modified-since`)** λ¥Ό ν¬ν•¨

![image](https://user-images.githubusercontent.com/83503188/209659533-814751db-4132-4e9e-b871-503b6b504d86.png)
- μ„λ²„μ— μ΅΄μ¬ν•λ” μ΄λ―Έμ§€μ μµμΆ… μμ •μΌκ³Ό λΈλΌμ°μ € μΊμ‹μ— μ΅΄μ¬ν•λ” λ°μ΄ν„°μ μµμΆ… μμ •μΌμ„ λΉ„κµν•λ‹¤.

![image](https://user-images.githubusercontent.com/83503188/209659568-ff090ba4-560e-42ae-ab32-cf112a6c2ba9.png)
- μμ •μ΄ μ•λ¨μ„ νλ‹¨ν•λ©΄ HTTP Body κ°€ μ—†λ” `304 Not Modified` λ©”μ‹μ§€λ¥Ό μ „μ†΅

![image](https://user-images.githubusercontent.com/83503188/209659594-d1ee051a-2e69-437e-80c8-2eea7c224ba2.png)

![image](https://user-images.githubusercontent.com/83503188/209659627-cbaa3d8a-7bc4-46f0-b408-bac7ace9ea6d.png)

</details>

- μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•΄λ„, μ„λ²„μ λ°μ΄ν„°κ°€ κ°±μ‹ λμ§€ μ•μΌλ©΄
- **`304 Not Modified` + ν—¤λ” λ©”νƒ€ μ •λ³΄λ§ μ‘λ‹µ(λ°”λ””X)**
- ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ³΄λ‚Έ μ‘λ‹µ ν—¤λ” μ •λ³΄λ΅ μΊμ‹μ λ©”νƒ€ μ •λ³΄λ¥Ό κ°±μ‹ 
- ν΄λΌμ΄μ–ΈνΈλ” μΊμ‹μ— μ €μ¥λμ–΄ μλ” λ°μ΄ν„° μ¬ν™μ©
- κ²°κ³Όμ μΌλ΅ **λ„¤νΈμ›ν¬ λ‹¤μ΄λ΅λ“κ°€ λ°μƒ**ν•μ§€λ§, **μ©λ‰μ΄ μ μ€ ν—¤λ” μ •λ³΄λ§ λ‹¤μ΄λ΅λ“**
- λ§¤μ° μ‹¤μ©μ μΈ ν•΄κ²°μ±…

μ‚¬μ©μ μ”μ²­μ—μ„ cache-control μ max-age=0μΈ κ²½μ°μ—λ” μ¤‘κ°„μ— μΊμ‹μ„λ²„μ—μ„ λ°”λ΅ μ‘λ‹µν•λ©΄ μ•λκ³ , μ› μ„λ²„(origin server)κΉμ§€ μ”μ²­ν•©λ‹λ‹¤. μ›μ„λ²„μ—μ„ 304λ¥Ό λ°ν™ν•΄μ•Ό ν• μ§€ κ²°μ •ν•΄μ•Ό ν•λ‹¤λ” λ» μ› μ„λ²„λ” μ‘λ‹µμ‹μ— ν΄λΌμ΄μ–ΈνΈκ°€ μΊμ‹ν•κΈΈ μ›ν•λ” max-ageλ¥Ό λ°ν™ν•  μ μμµλ‹λ‹¤.

μ°Έκ³ : https://stackoverflow.com/questions/1046966/whats-the-difference-between-cache-control-max-age-0-and-no-cache

<br/>

<br/>

## ETag

**κ²€μ¦ ν—¤λ”**
- μΊμ‹ λ°μ΄ν„°μ™€ μ„λ²„ λ°μ΄ν„°κ°€ κ°™μ€μ§€ κ²€μ¦ν•λ” λ°μ΄ν„°
- `Last-Modified , ETag`

**μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”**
- κ²€μ¦ ν—¤λ”λ΅ μ΅°κ±΄μ— λ”°λ¥Έ λ¶„κΈ°
- `If-Modified-Since`: Last-Modified μ‚¬μ©
- `If-None-Match`: ETag μ‚¬μ©
- μ΅°κ±΄μ΄ λ§μ΅±ν•λ©΄ `200 OK`
- μ΅°κ±΄μ΄ λ§μ΅±ν•μ§€ μ•μΌλ©΄ `304 Not Modified`

<br/>

<br/>


### **Last-Modified, If-Modified-Since λ‹¨μ **

- 1μ΄ λ―Έλ§(0.xμ΄) λ‹¨μ„λ΅ μΊμ‹ μ΅°μ •μ΄ λ¶κ°€λ¥
    - 2020λ…„ 11μ›” 10μΌ 10:00:00 -> μµλ€κ°€ μ΄ λ‹¨μ„
- λ‚ μ§ κΈ°λ°μ λ΅μ§ μ‚¬μ©
- λ°μ΄ν„°λ¥Ό μμ •ν•΄μ„ λ‚ μ§κ°€ λ‹¤λ¥΄μ§€λ§, κ°™μ€ λ°μ΄ν„°λ¥Ό μμ •ν•΄μ„ λ°μ΄ν„° κ²°κ³Όκ°€ λ‘κ°™μ€ κ²½μ°
- μ„λ²„μ—μ„ λ³„λ„μ μΊμ‹ λ΅μ§μ„ κ΄€λ¦¬ν•κ³  μ‹¶μ€ κ²½μ°
    - μ) μ¤νμ΄μ¤λ‚ μ£Όμ„μ²λΌ ν¬κ² μν–¥μ΄ μ—†λ” λ³€κ²½μ—μ„ μΊμ‹λ¥Ό μ μ§€ν•κ³  μ‹¶μ€ κ²½μ°

### **Last-Modified, If-Modified-Since λ‹¨μ  μμ‹**

- If-Modified-Since: μ΄ν›„μ— λ°μ΄ν„°κ°€ μμ •λμ—μΌλ©΄?
  - λ°μ΄ν„° λ―Έλ³€κ²½ μμ‹
    - μΊμ‹: 2020λ…„ 11μ›” 10μΌ <span style="color:blue">10:00:00</span> vs μ„λ²„: 2020λ…„ 11μ›” 10μΌ <span style="color:red">10:00:00</span>
    - `304 Not Modified`, **ν—¤λ” λ°μ΄ν„°λ§ μ „μ†΅(BODY λ―Έν¬ν•¨)**
    - μ „μ†΅ μ©λ‰ 0.1M (ν—¤λ” 0.1M, λ°”λ”” 1.0M)
  - λ°μ΄ν„° λ³€κ²½ μμ‹
    - μΊμ‹: 2020λ…„ 11μ›” 10μΌ <span style="color:blue">10:00:00</span> vs μ„λ²„: 2020λ…„ 11μ›” 10μΌ <span style="color:red;">11:00:00</span>
    - `200 OK`, **λ¨λ“  λ°μ΄ν„° μ „μ†΅(BODY ν¬ν•¨)**
    - μ „μ†΅ μ©λ‰ 1.1M (ν—¤λ” 0.1M, λ°”λ”” 1.0M)

<br/>

<br/>

## **ETag, If-None-Match**

`ETag(Entity Tag)`

**μ§„μ§ λ‹¨μν•κ² ETagλ§ λ³΄λ‚΄μ„ κ°™μΌλ©΄ μ μ§€, λ‹¤λ¥΄λ©΄ λ‹¤μ‹ λ°›κΈ°!**

- μΊμ‹μ© λ°μ΄ν„°μ— λ‚ μ§κ°€ μ•„λ‹ μ„μμ κ³ μ ν• λ²„μ „ μ΄λ¦„μ„ λ‹¬μ•„λ‘ 
    - μ) ETag: "v1.0", ETag: "a2jiodwjekjl3"
- λ°μ΄ν„°κ°€ λ³€κ²½λλ©΄ μ΄ μ΄λ¦„μ„ λ°”κΎΈμ–΄μ„ λ³€κ²½ν•¨(Hashλ¥Ό λ‹¤μ‹ μƒμ„±)
    - νμΌμ„ ν•΄μ‹ μ•κ³ λ¦¬μ¦μ„ ν†µν•΄ κ²°κ³Όλ¥Ό μ¶λ ¥ν•λ©΄ νμΌμ Content λ¥Ό ν†µν•΄ μ¶λ ¥ν•κΈ° λ•λ¬Έμ—, Content κ°€ λ³€κ²½λμ§€ μ•μΌλ©΄ ν•΄μ‹ κ²°κ³Όλ” λ™μΌν•κ² λ‚μ¨λ‹¤.
    - λ‹¨μν μ„λ²„μ—μ„ κ°’μ„ μƒμ„±ν•μ—¬ Etag μ— λ„£μ„ μλ„ μμ
    - μ) ETag: "aaaaa" -> ETag: "bbbbb"

<br/>

## ETag μμ‹

<details>
<summary>ETag μ μ© μμ‹</summary>

<br/>

## ETag μ μ©

**μ²« λ²μ§Έ μ”μ²­**

![image](https://user-images.githubusercontent.com/83503188/209661447-d6332126-91e4-4056-b19b-c81ddb64be63.png)

![image](https://user-images.githubusercontent.com/83503188/209661481-8f1aa3b5-ea4a-4c46-9b1f-11a536cfce9d.png)

**λ‘ λ²μ§Έ μ”μ²­ - μΊμ‹ μ‹κ°„ μ΄κ³Ό**

![image](https://user-images.githubusercontent.com/83503188/209661524-7d31c705-b66a-4fec-a816-b20e55f413f6.png)

![image](https://user-images.githubusercontent.com/83503188/209661541-6a5782f3-e8d5-4b5a-9c18-afbcdfedb75f.png)

![image](https://user-images.githubusercontent.com/83503188/209661570-1f4cb013-f330-4138-b159-8eeedcd5a50d.png)

![image](https://user-images.githubusercontent.com/83503188/209661578-6f0832b3-d247-4d02-bffe-aae5f48c5db0.png)

![image](https://user-images.githubusercontent.com/83503188/209661608-36980fc2-aa9b-443a-9b69-7ec3330742b7.png)

![image](https://user-images.githubusercontent.com/83503188/209661629-574b6b16-576a-492d-bb0f-ff2279d6fc61.png)

![image](https://user-images.githubusercontent.com/83503188/209661641-9d2f08bb-84d7-408c-a547-609afd6a643a.png)

</details>

<br/>

## ETag μ •λ¦¬

**μΊμ‹ μ μ–΄ λ΅μ§μ„ μ„λ²„μ—μ„ μ™„μ „ν κ΄€λ¦¬!!!**

- μ§„μ§ λ‹¨μν•κ² ETagλ§ μ„λ²„μ— λ³΄λ‚΄μ„ κ°™μΌλ©΄ μ μ§€, λ‹¤λ¥΄λ©΄ λ‹¤μ‹ λ°›κΈ°!
- ν΄λΌμ΄μ–ΈνΈλ” λ‹¨μν μ΄ κ°’μ„ μ„λ²„μ— μ κ³µ(ν΄λΌμ΄μ–ΈνΈλ” μΊμ‹ λ©”μ»¤λ‹μ¦μ„ λ¨λ¦„)
- μ)
    - μ„λ²„λ” λ°°νƒ€ μ¤ν” κΈ°κ°„μΈ 3μΌ λ™μ• νμΌμ΄ λ³€κ²½λμ–΄λ„ ETagλ¥Ό λ™μΌν•κ² μ μ§€
    - μ• ν”λ¦¬μΌ€μ΄μ… λ°°ν¬ μ£ΌκΈ°μ— λ§μ¶”μ–΄ ETag λ¨λ‘ κ°±μ‹ 

<br/>

<br/>

<br/>

# π’΅ μΊμ‹μ™€ μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

## μΊμ‹ μ μ–΄ ν—¤λ”

- Cache-Control: μΊμ‹ μ μ–΄
- ~~Pragma: μΊμ‹ μ μ–΄(ν•μ„ νΈν™)~~
- ~~Expires: μΊμ‹ μ ν¨ κΈ°κ°„(ν•μ„ νΈν™)~~

## Cache-Control

**μΊμ‹ μ§€μ‹μ–΄(directives)**

- Cache-Control: max-age
    - μΊμ‹ μ ν¨ μ‹κ°„, μ΄ λ‹¨μ„
- Cache-Control: `no-cache`
    - **λ°μ΄ν„°λ” μΊμ‹ν•΄λ„ λμ§€λ§, ν•­μƒ μ›(origin) μ„λ²„μ— κ²€μ¦ν•κ³  μ‚¬μ©**
- Cache-Control: `no-store`
    - λ°μ΄ν„°μ— λ―Όκ°ν• μ •λ³΄κ°€ μμΌλ―€λ΅ **μ €μ¥ν•λ©΄ μ•λ¨**(λ©”λ¨λ¦¬μ—μ„ μ‚¬μ©ν•κ³  μµλ€ν• λΉ¨λ¦¬ μ‚­μ )

<br/>

## Pragma

**μΊμ‹ μ μ–΄(ν•μ„ νΈν™)**

μ΄μ  μ μ•μ“°μΈλ‹¤.

- Pragma: no-cache
- HTTP 1.0 ν•μ„ νΈν™

<br/>

## Expires

**μΊμ‹ λ§λ£μΌ μ§€μ •(ν•μ„ νΈν™)**

μ΄μ  μ μ•μ“°μΈλ‹¤.

`expires: Mon, 01 Jan 1990 00:00:00 GMT`

- μΊμ‹ λ§λ£μΌμ„ μ •ν™•ν• λ‚ μ§λ΅ μ§€μ •
- HTTP 1.0 λ¶€ν„° μ‚¬μ©
- μ§€κΈμ€ λ” μ μ—°ν• Cache-Control: max-age κ¶μ¥
    - `Cache-Control: max-age=60` μ΄ λ‹¨μ„λ΅ μ§€μ •ν•λ”κ² λ”μ± μ μ—°
- Cache-Control: max-ageμ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ Expiresλ” λ¬΄μ‹

<br/>


## κ²€μ¦ ν—¤λ”μ™€ μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

- κ²€μ¦ ν—¤λ” (Validator)
    - ETag: "v1.0", ETag: "asid93jkrh2l"
    - Last-Modified: Thu, 04 Jun 2020 07:19:24 GMT
- μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”
    - If-Match, If-None-Match: ETag κ°’ μ‚¬μ©
    - If-Modified-Since, If-Unmodified-Since: Last-Modified κ°’ μ‚¬μ©

<br/>

<br/>

<br/>


# π’΅ ν”„λ΅μ‹ μΊμ‹

**μ› μ„λ²„ μ§μ ‘ μ ‘κ·Ό - origin μ„λ²„**

![image](https://user-images.githubusercontent.com/83503188/209664328-cafcfecc-7db5-4420-a14f-2d91eeafba99.png)
- λ―Έκµ­μ— μ‹¤μ  λ°μ΄ν„°λ¥Ό κ°€μ§„ μ„λ²„λ¥Ό μ›(origin) μ„λ²„λΌκ³  ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈκ°€ μ› μ„λ²„μ— μ§μ ‘ μ ‘κ·Όν•κ²λλ©΄ μ‚¬μ©μμ—κ² μ‘λ‹µμ΄ λ„λ¬΄ λλ¦¬λ‹¤.

<br/>

## ν”„λ΅μ‹ μΊμ‹ λ„μ…

**μ²« λ²μ§Έ μ”μ²­**

![image](https://user-images.githubusercontent.com/83503188/209664008-dfd69437-c071-4ab3-a487-4b225b34918b.png)
- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ› μ„λ²„μ— μ§μ ‘ μ ‘κ·Όν•λ”κ²ƒμ΄ μ•„λ‹ μ¤‘κ°„μ— ν”„λ΅μ‹ μΊμ‹ μ„λ²„λ¥Ό λ‘κ³ , ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ²λ¦¬
- μ‘λ‹µ μ‹κ°„μ„ κ°μ„ ν•  μ μλ‹¤.
- CDM μ„λΉ„μ¤

![image](https://user-images.githubusercontent.com/83503188/209664035-acd93604-9d91-4a2c-a58d-db2121a68bfd.png)
- μ²« λ²μ§Έ μ”μ²­μ„ λ³΄λ‚΄λ” ν΄λΌμ΄μ–ΈνΈλ” ν”„λ΅μ‹ μΊμ‹ μ„λ²„μ— λ°μ΄ν„°κ°€ μ΅΄μ¬ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ‘λ‹µμ΄ λλ¦¬λ‹¤.
- νΉμ€ μ› μ„λ²„μ—μ„ λ―Έλ¦¬ ν”„λ΅μ‹ μΊμ‹ μ„λ²„μ— λ°μ΄ν„°λ¥Ό λ°€μ–΄λ„£λ” κ²½μ°λ„ μ΅΄μ¬ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈμ μ›Ή λΈλΌμ°μ €λ‚ λ΅μ»¬μ„ private μΊμ‹λΌκ³  ν•λ©°, ν”„λ΅μ‹ μΊμ‹ μ„λ²„λ¥Ό κ³µμ©μΌλ΅ μ‚¬μ©ν•λ―€λ΅ public μΊμ‹λΌκ³  ν•λ‹¤.

<br/>

## Cache-Control

**μΊμ‹ μ§€μ‹μ–΄(directives) - κΈ°νƒ€**

- `Cache-Control: public`
    - **μ‘λ‹µμ΄ public μΊμ‹μ— μ €μ¥λμ–΄λ„ λ¨**
- `Cache-Control: private`
    - **μ‘λ‹µμ΄ ν•΄λ‹Ή μ‚¬μ©μλ§μ„ μ„ν• κ²ƒμ„, private μΊμ‹μ— μ €μ¥ν•΄μ•Ό ν•¨(κΈ°λ³Έκ°’)**
- Cache-Control: s-maxage
    - ν”„λ΅μ‹ μΊμ‹μ—λ§ μ μ©λλ” max-age
    - μ΄λ°κ² μλ‹¤λ” κ²ƒλ§ μ•μ•„λ‘μ.
- Age: 60 (HTTP ν—¤λ”)
    - μ¤λ¦¬μ§„ μ„λ²„μ—μ„ μ‘λ‹µ ν›„ ν”„λ΅μ‹ μΊμ‹ λ‚΄μ— λ¨Έλ¬Έ μ‹κ°„(μ΄)
    - μ΄κ²ƒλ„ μ΄λ°κ² μλ‹¤λ” μ •λ„λ§ μ•μ•„λ‘μ.

<br/>

<br/>

<br/>

## μΊμ‹ λ¬΄ν¨ν™”

### Cache-Control

**ν™•μ‹¤ν• μΊμ‹ λ¬΄ν¨ν™” μ‘λ‹µ**

Cache λ¥Ό μ μ©μ•ν•΄λ„ μ›Ή λΈλΌμ°μ €μ—μ„ μ„μλ΅ μΊμ‹ν•λ” κ²½μ°κ°€ μ΅΄μ¬ν•κΈ° λ•λ¬Έμ— λ¬΄ν¨ν™”κ°€ ν•„μ”ν•λ‹¤.

- Cache-Control: no-cache, no-store, must-revalidate
- Pragma: no-cache
    - HTTP 1.0 ν•μ„ νΈν™
    - κ³Όκ±° HTTP 1.0 μ”μ²­μ΄ μ¬ μ μκΈ° λ•λ¬Έμ— λ„£μ–΄μ¤€λ‹¤.

**μΊμ‹ μ§€μ‹μ–΄(directives) - ν™•μ‹¤ν• μΊμ‹ λ¬΄ν¨ν™”**

- Cache-Control: no-cache
    - λ°μ΄ν„°λ” μΊμ‹ν•΄λ„ λμ§€λ§, ν•­μƒ μ› μ„λ²„μ— κ²€μ¦ν•κ³  μ‚¬μ©(μ΄λ¦„μ— μ£Όμ!)
- Cache-Control: no-store
    - λ°μ΄ν„°μ— λ―Όκ°ν• μ •λ³΄κ°€ μμΌλ―€λ΅ μ €μ¥ν•λ©΄ μ•λ¨(λ©”λ¨λ¦¬μ—μ„ μ‚¬μ©ν•κ³  μµλ€ν• λΉ¨λ¦¬ μ‚­μ )
- Cache-Control: must-revalidate
    - μΊμ‹ λ§λ£ν›„ μµμ΄ μ΅°νμ‹ μ› μ„λ²„μ— κ²€μ¦ν•΄μ•Όν•¨
    - μ› μ„λ²„ μ ‘κ·Ό μ‹¤ν¨μ‹ λ°λ“μ‹ μ¤λ¥κ°€ λ°μƒν•΄μ•Όν•¨ - 504(Gateway Timeout)
    - must-revalidate λ” μΊμ‹ μ ν¨ μ‹κ°„μ΄λΌλ©΄ μΊμ‹λ¥Ό μ‚¬μ©ν•¨
- Pragma: no-cache
    - HTTP 1.0 ν•μ„ νΈν™

### no-cache vs must-revalidate

no-cache λ§ μ‚¬μ©ν•΄λ„ ν•­μƒ μ› μ„λ²„μ— κ²€μ¦ν•λ”λ° must-revalidate κΉμ§€ μ‚¬μ©ν•΄μ•Όν•λ” μ΄μ ?

**no-cache κΈ°λ³Έ λ™μ‘**

![image](https://user-images.githubusercontent.com/83503188/209665142-b27b2976-b000-444b-aaa0-0045c4642cf3.png)
- ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ‹ no-cache κ°€ μ μ©λμ–΄ μκΈ° λ•λ¬Έμ— ν”„λ΅μ‹ μΊμ‹ μ„λ²„μ—μ„ μ²λ¦¬ν•μ§€ μ•κ³  μ› μ„λ²„μ— μ§μ ‘ μ”μ²­ν•λ‹¤.

![image](https://user-images.githubusercontent.com/83503188/209665151-53357172-c730-4677-adb5-d4217ba123bf.png)

**no-cache**

![image](https://user-images.githubusercontent.com/83503188/209665183-bfc6182f-8990-4374-ad5d-7d2744121559.png)
- no-cache μ΄λ―€λ΅ μ› μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄μ•Όν•λ”λ° λ„¤νΈμ›ν¬κ°€ λ‹¨μ 
- μ”μ²­μ„ μ „λ‹¬ν•λ” ν”„λ΅μ‹ μΊμ‹ μ„λ²„μ—μ„ μ„¤μ •μ„ ν†µν•΄ μ¥μ• λ³΄λ‹¤λ” κ³Όκ±° λ°μ΄ν„°λΌλ„ λ°ν™ν•  μ μμ

**must-revalidate**

![image](https://user-images.githubusercontent.com/83503188/209665220-41fe2def-7959-42f7-ad0a-8a81d44cbfe3.png)
- must-revalidate λ” λ„¤νΈμ›ν¬κ°€ λ‹¨μ λ κ²½μ° λ°λ“μ‹ 504 μ²λ¦¬
